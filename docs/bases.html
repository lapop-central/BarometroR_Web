<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Bases de datos del Barómetro de las Américas</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">LAPOP_edu</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Preparación
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="instalando.html">Instalando R y RStudio</a>
    </li>
    <li>
      <a href="bases.html">Importación de bases de datos</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Aspectos iniciales
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Manipulacion.html">Manejo de datos</a>
    </li>
    <li>
      <a href="Expansion.html">Factor de expansión</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Describir y graficar
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Descriptivos.html">Descriptivos variables nominales</a>
    </li>
    <li>
      <a href="Descriptivos2.html">Descriptivos variables ordinales</a>
    </li>
    <li>
      <a href="Descriptivos3.html">Descriptivos variables numéricas</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Inferencia básica
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="IC.html">Intervalos de confianza</a>
    </li>
    <li>
      <a href="pruebat.html">Comparación de 2 medias</a>
    </li>
    <li>
      <a href="anova.html">Comparación de varias medias</a>
    </li>
    <li>
      <a href="chi.html">Tablas cruzadas y chi-cuadrado</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Modelamiento
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="correlacion.html">Correlación</a>
    </li>
    <li>
      <a href="regresion1.html">Regresión lineal simple</a>
    </li>
    <li>
      <a href="regresion2.html">Regresión lineal multivariada</a>
    </li>
    <li>
      <a href="logit.html">Regresión logística</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Adicionales
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mapas.html">Mapas</a>
    </li>
  </ul>
</li>
<li>
  <a href="Links.html">Contacto</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Bases de datos del Barómetro de las
Américas</h1>

</div>


<style type="text/css">
.columns {display: flex;}
h1 {color: #3366CC;}
</style>
<div id="introducción" class="section level1">
<h1>Introducción</h1>
<p>Los datos que vamos a usar a lo largo de todos estos temas son los
del proyecto del Barómetro de las Américas de <a
href="https://www.vanderbilt.edu/lapop/">LAPOP Lab</a>. Como centro de
excelencia en investigación por encuestas, LAPOP Lab usa enfoques y
métodos innovadores con los “estándares más altos” para llevar a cabo
encuestas nacionales; conducir estudios de evaluación de impacto, y
producir reportes acerca de las actitudes, evaluaciones y experiencias
de los individuos. El Barómetro de las Américas es la única encuesta
comparativa y científicamente rigurosa que cubre 34 naciones incluyendo
Norte, Centro y Sudamérica, así como también, un significativo número de
países en el Caribe. Cada año publica docenas de estudios académicos de
alta calidad y artículos de relevancia para la elaboración de políticas
públicas. Los reportes producidos por el proyecto se pueden ver y
descargar es este <a
href="https://www.vanderbilt.edu/lapop/publications.php">link</a>.</p>
<p>El Barómetro de las Américas del 2018/19 es la octava ronda de este
proyecto. El cuestionario contiene un módulo común que permite evaluar
hasta qué punto los ciudadanos apoyan los valores democráticos, perciben
que hay suficiente provisión de libertades básicas, cómo experimentan el
Estado de Derecho, cómo participan en la vida política, si apoyan su
sistema de gobierno, si usan las redes sociales, entre otros temas. Los
cuestionarios generales y los específicos para cada país pueden
encontrarse en este <a
href="https://www.vanderbilt.edu/lapop/core-surveys.php">link</a>.</p>
<p>La base de datos y los reportes del proyecto son públicos y se
encuentran disponibles de forma gratuita en la página web del
proyecto.</p>
<p>Estos datos deben citarse de la siguiente manera: Fuente: Barómetro
de las Américas por el Proyecto de Opinión Pública de América Latina
(LAPOP), wwww.LapopSurveys.org.</p>
</div>
<div id="para-descargar-los-datos-del-barómetro-de-las-américas"
class="section level1">
<h1>Para descargar los datos del Barómetro de las Américas</h1>
<p>Los datos se puede descargar de manera libre <a
href="http://datasets.americasbarometer.org/database/login.php">aquí</a>.
En este enlace, se pueden registrar o entrar como “Free User”. En el
buscador, se puede ingresar el texto “2018”. Ahí se tendrá acceso a la
base de datos completa “2004-2018 LAPOP AmericasBarometer Merge
(v1.0FREE).dta” (434.6MB) en versión para STATA.</p>
<p><img src="datos.png" width="372" /></p>
<p>También se puede acceder a las bases de datos de cada país. Por
ejemplo, si en el buscador se ingresa el texto “Mexico”, se puede
acceder a las bases de datos de México para cada una de las rondas del
Barómetro de las Américas en ese país. Los datos de la última ronda se
pueden descargar como un archivo llamado “Mexico LAPOP AmericasBarometer
2019 v1.0_W.dta”, en formato STATA. Este archivo también se descarga
directamente como un archivo .dta. Además de la base de datos, también
se tiene acceso al cuestionario y al libro de códigos.</p>
<p><img src="mexico.png" width="376" /></p>
</div>
<div id="importar-las-bases-de-datos-del-barómetro-de-las-américas"
class="section level1">
<h1>Importar las bases de datos del Barómetro de las Américas</h1>
<p>Una vez descargados los datos, es una buena práctica crear un nuevo
proyecto en RStudio. En el menú “File”, se tiene la opción “New
Project”, donde se selecciona la opción “New directory” y “New project”,
donde se tiene que nombrar el proyecto y darle una ruta en el disco.</p>
<p><img src="project.png" width="380" /></p>
<p>Esta ruta será el directorio de trabajo donde se guardará los
archivos que se vaya trabajando y produciendo. Si no queda claro cuál es
la ruta seleccionada, siempre se puede visualizar el directorio de
trabajo en la consola de RStudio o se puede encontrar con el comando
<code>getwd()</code>. Si se desea cambiar de directorio de trabajo, se
puede usar el comando <code>setwd()</code>. Por ejemplo, se podría
definir:</p>
<p><code>setwd("ruta_del_directorio_de_trabajo/directorio_de_trabajo")</code></p>
<p>La base de datos del Barómetro de las Américas descargada se tiene
que guardar en el directorio de trabajo. De esta manera, se puede leer
la base de datos en STATA como un objeto dataframe en R. Hay varias
maneras de leer una base de datos en R. Una primera manera es mediante
el menú “File” y el submenú “Import Dataset”. Dentro de esta opción se
ve que se pueden importar archivos en formato text, Excel, SPSS, SAS o
STATA. Si se escoge STATA, se abre una ventana donde se debe buscar la
ruta del archivo. Esta ventana mostrará una previsualización de la base
de datos. La base de datos muestra el nombre original por defecto, pero
el nombre puede cambiarse por uno más simple. En este ejemplo hemos
cambiado el nombre de “LAPOP_Merge_2004_2018.dta” a solo “lapop”. Con
ese nombre aparecerá en el Environment.</p>
<p><img src="import.png" width="700" /></p>
<p>Esta forma de importar las bases de datos se puede hacer también
mediante código, lo que es recomendable cuando se tiene un Script de R o
un archivo RMarkdown. De hecho, el menú “Import Dataset” muestra el
código que se puede aplicar para reproducir el proceso.</p>
<p>Aquí es necesario indicar que R y RStudio trabajan con paquetes
(“packages”) que contienen comandos y algoritmos para realizar
procedimientos. Algunos de estos paquetes vienen cargados desde la
instalación, otros hay que instalarlos desde el repositorio de R (CRAN).
En los siguientes módulos vamos a trabajar con algunos paquetes que no
vienen cargados y que se tienen que instalar. Para esto se va a usar el
código <code>install.packages("paquete")</code>.</p>
<p>Una vez instalado un paquete, este se tiene que llamar para que esté
“activo”. Los paquetes activos tiene un check en el módulo de Packages.
Para llamar a los paquetes se usa el comando
<code>library(paquete)</code>.</p>
<p>En este caso, para importar una base de datos en Stata se llama a la
librería <code>haven</code> y se usa el comando <code>read_stata</code>.
Los detalles de esta librería se pueden encontrar <a
href="https://cran.r-project.org/web/packages/haven/index.html">aquí</a>.
En esta librería también se tiene el comando <code>read_dta</code> para
leer archivos de STATA o el comando <code>read_sav</code> para archivos
de SPSS. En nuestro ejemplo, si el archivo sobre México en formato STATA
está en el directorio de trabajo, el código para cargar este archivo
como un Dataframe de R llamado “mex18” sería:</p>
<p><code>library(haven)</code></p>
<p>Luego</p>
<p><code>mex18 &lt;- read_stata("Mexico LAPOP AmericasBarometer 2019 v1.0_W.dta")</code>.</p>
<p>Tenga en cuenta que siempre se debe cargar la librería, con el
comando <code>library</code>, antes de usar comandos pertenecientes a
esas librerías. Si no se carga la librería antes, el código resultará en
un error.</p>
<p>Dentro del menú “Import Dataset” también se puede cargar la librería
<code>readxl</code> y el comando <code>read_excel</code> para importar
archivos Excel. Finalmente, también se puede cargar la librería
<code>readr</code> para leer archivos .txt.</p>
<p>En la sección sobre <a
href="https://arturomaldonado.github.io/BarometroEdu_Web/correlacion.html">correlación</a>
se trabajará con datos del proyecto Varieties of Democracy (o V-Dem).
Estos datos pueden ser descargados de la web del proyecto en formato
.csv o .xls. Si descargamos estos datos y los guardamos en el directorio
de trabajo con el nombre “vdem.xlsx”, estos datos se pueden leer como un
nuevo dataframe. Primero se carga la librería</p>
<p><code>library(readxl)</code></p>
<p>Luego la base de datos</p>
<p><code>vdem &lt;- read_excel("vdem.xlsx")</code>.</p>
<p>Una opción general para cargar bases de datos en RStudio es instalar
y usar la librería <code>rio</code>. Esta librería permite importar,
exportar y convertir diferentes tipos de archivos de datos, como Stata,
SPSS, Excel, csv, SAS, RData, Minitab, dbf, entre muchos otros. Para
esta web, esta librería es útil dado que incluso permite importar bases
de datos almacenadas en repositorios virtuales, como de GitHub.</p>
</div>
<div id="leyendo-los-datos-del-barómetro-en-rstudio"
class="section level1">
<h1>Leyendo los datos del Barómetro en RStudio</h1>
<p>A lo largo de estas secciones, se usarán bases de datos recortadas de
la ronda 2018/19 por temas de espacio y también se usarán bases de datos
en formato RData, un tipo de archivo de datos nativo de R, que es
eficiente en términos de almacenamiento y que permite cargar la base de
datos de la ronda 2018/19 con todas las variables.</p>
<p>Estas base de datos se encuentran alojadas en el repositorio
“materials_edu” de la cuenta de LAPOP en <a
href="https://github.com/lapop-central/materials_edu">GitHub</a>. A
partir de aquí usaremos código que se puede replicar.</p>
<p>Por ejemplo, para cargar una versión recortada de la base de datos de
la ronda 2018/19, guardada en GitHub en formato SPSS, se puede cargar la
libraría <code>rio</code> y llamar a esta base de datos remota con el
comando <code>import</code>.</p>
<pre class="r"><code>#install.packages(&quot;rio&quot;) Este código se usaría en caso no tengan instalado este paquete
library(rio) 
lapop18 &lt;- import(&quot;https://raw.github.com/lapop-central/materials_edu/main/LAPOP_AB_Merge_2018_v1.0.sav&quot;)</code></pre>
<p>Una vez corrido este código, vemos que aparece la base de datos en el
Environment. Esta base consta de 31,050 observaciones y 84
variables.</p>
<p>De la misma manera, se puede usar la librería <code>rio</code> para
llamar a la base de datos completa, en formato RData, con el mismo
comando. Se guarda esta nueva base de datos en un dataframe
“lapop18v2”.</p>
<pre class="r"><code>lapop18v2 &lt;- import(&quot;https://raw.github.com/lapop-central/materials_edu/main/lapop18.RData&quot;)</code></pre>
<p>Esta otra base de datos tiene 28,042 observaciones (pues no incluye a
Estados Unidos y Canadá) e incluye 1,369 variables.</p>
</div>
<div id="resumen" class="section level1">
<h1>Resumen</h1>
<p>En esta sección se ha explicado brevemente cómo descargar las bases
de datos del Barómetro de las Américas, ya sea de una ronda completa o
de algún país en particular. Luego, se ha explicado cómo definir un
Proyecto en RStudio y cómo definir un directorio de trabajo. Es en este
directorio donde se deben guardar las bases de datos descargadas para
poder importarlas a RStudio. Esta importación se puede hacer usando
principalmente la librería <code>haven</code> y la librería
<code>rio</code>. Con estas librerías podemos importar múltiples
formatos de bases de datos, incluyendo Stata, SPSS, csv, formatos en los
que se pueden descargar las bases de datos del Barómetro de las
Américas.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
